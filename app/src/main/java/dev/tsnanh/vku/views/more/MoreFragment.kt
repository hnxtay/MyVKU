/* * Copyright (c) 2020 My VKU by tsnAnh */package dev.tsnanh.vku.views.moreimport android.os.Bundleimport android.view.LayoutInflaterimport android.view.Viewimport android.view.ViewGroupimport androidx.databinding.DataBindingUtilimport androidx.fragment.app.Fragmentimport androidx.fragment.app.viewModelsimport androidx.lifecycle.Observerimport androidx.navigation.fragment.findNavControllerimport com.google.android.material.transition.MaterialFadeThroughimport com.google.firebase.auth.FirebaseAuthimport dev.tsnanh.vku.Rimport dev.tsnanh.vku.databinding.FragmentMoreBindingimport dev.tsnanh.vku.viewmodels.MoreViewModelclass MoreFragment : Fragment() {    private lateinit var binding: FragmentMoreBinding    private val viewModel: MoreViewModel by viewModels()    override fun onCreate(savedInstanceState: Bundle?) {        super.onCreate(savedInstanceState)        enterTransition = MaterialFadeThrough.create()        exitTransition = MaterialFadeThrough.create()    }    override fun onCreateView(        inflater: LayoutInflater,        container: ViewGroup?,        savedInstanceState: Bundle?    ): View? {        binding = DataBindingUtil            .inflate(inflater, R.layout.fragment_more, container, false)        return binding.root    }    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {        super.onViewCreated(view, savedInstanceState)        binding.viewModel = viewModel        viewModel.user.observe(viewLifecycleOwner, Observer {            it?.let {                binding.user = it            }        })        viewModel.navigateToSettings.observe(viewLifecycleOwner, Observer {            it?.let {                findNavController().navigate(MoreFragmentDirections.activitySettings())                viewModel.onNavigatedToSettings()            }        })        viewModel.signOut.observe(viewLifecycleOwner, Observer {            it?.let {                FirebaseAuth.getInstance().signOut()                findNavController().navigate(MoreFragmentDirections.actionNavigationMoreToNavigationWelcome())                viewModel.onSignedOut()            }        })    }}